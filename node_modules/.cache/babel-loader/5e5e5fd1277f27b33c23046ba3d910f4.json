{"ast":null,"code":"var _jsxFileName = \"/Users/nhatngo/Downloads/demo-chatbot-master/frontend/src/container/Home.jsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, Fragment } from \"react\";\nimport \"../App.css\";\nimport ListEntity from \"../component/ListEntity\";\nimport PopUpCreateEntity from \"../base/PopUpCreateEntity\";\nimport axios from \"axios\";\nimport PopUpCreateIntent from \"../base/PopUpCreateIntent\";\nimport dropdown from '../access/img/icon_down.png';\nimport Loader from 'react-loader-spinner';\nimport robot from \"../access/img/icon_robot.png\";\nimport edit from '../access/img/icon_edit_text.png';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport ReactDOM from 'react-dom';\nimport Modal from 'react-modal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Card({\n  card,\n  onChangeCard,\n  indexSelect,\n  onDeleteCard\n}) {\n  _s();\n\n  const [modalIsOpen, setIsOpen] = React.useState(false);\n  const [modalIsOpen2, setIsOpen2] = React.useState(false);\n  const [valueUrl, setValueUrl] = React.useState(\"\");\n  const [valueNameKnot, setNameKnot] = React.useState(\"\");\n  const [valiDateUrlInput, setValiDateUrlInput] = React.useState(false);\n  const [valiadateTextKnot, setValidateTextKnot] = React.useState(false);\n  const {\n    title,\n    subtitle,\n    image,\n    buttons\n  } = card;\n  const [text, setText] = React.useState(null);\n  const [idx, setIdx] = React.useState(null); // model\n\n  const openModal = () => {\n    setIsOpen(true);\n  };\n\n  const closeModal = () => {\n    setIsOpen(false);\n  };\n\n  const openModal2 = () => {\n    setIsOpen2(true);\n  };\n\n  const closeModal2 = () => {\n    setIsOpen2(false);\n  };\n\n  const customStyles = {\n    content: {\n      top: '50%',\n      left: '50%',\n      right: 'auto',\n      bottom: 'auto',\n      marginRight: '-50%',\n      transform: 'translate(-50%, -50%)',\n      borderRadius: 20\n    }\n  };\n\n  const removeCard = key => {\n    onDeleteCard(key);\n  };\n\n  const onChangeUrlImg = url => {\n    if (!url) {\n      setValiDateUrlInput(true);\n      return;\n    }\n\n    onChangeCard({ ...card,\n      image: url\n    });\n    closeModal();\n    setValiDateUrlInput(false);\n    setValueUrl(\"\");\n  };\n\n  const onchangeText = text => {\n    if (!text) {\n      setValidateTextKnot(true);\n      return;\n    }\n\n    if (text) {\n      const btns = Array.from(card.buttons);\n      btns[idx] = {\n        text\n      };\n      onChangeCard({ ...card,\n        buttons: btns\n      });\n      closeModal2();\n      setIdx(null);\n      setNameKnot(\"\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      borderRadius: '8px',\n      backgroundColor: '#ccc',\n      padding: '16px',\n      border: '1px solid #ccc',\n      display: 'flex',\n      flexDirection: 'column',\n      marginRight: '24px',\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      value: title,\n      placeholder: \"Nh\\u1EADp ti\\xEAu \\u0111\\u1EC1\",\n      style: {\n        marginBottom: '8px'\n      },\n      onChange: e => onChangeCard({ ...card,\n        title: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      value: subtitle,\n      placeholder: \"Nh\\u1EADp m\\xF4 t\\u1EA3\",\n      style: {\n        marginBottom: '8px'\n      },\n      onChange: e => onChangeCard({ ...card,\n        subtitle: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginBottom: '8px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: image || 'https://via.placeholder.com/200/200',\n        alt: 'ảnh thẻ',\n        onClick: () => {\n          // const url = prompt(\"Nhập url ảnh\", image)\n          openModal(); // if (url) {\n          //   onChangeCard({...card, image: url})\n          // }\n        },\n        style: {\n          width: '150px',\n          height: '150px',\n          objectFit: 'cover'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), buttons && buttons.map((b, idx) => /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        openModal2();\n        setIdx(idx); // const text = prompt(\"Nhập tên nút\", b.text) \n        // const payload = prompt(\"Nhập payload\", b.payload) \n        // if (text) {\n        //   const btns = Array.from(card.buttons)\n        //   btns[idx] = {text}\n        //   onChangeCard({\n        //     ...card,\n        //     buttons: btns\n        //   })\n        // }\n      },\n      children: b.text\n    }, idx, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => onChangeCard({ ...card,\n        buttons: [...card.buttons, {\n          text: '<rỗng>',\n          payload: ''\n        }]\n      }),\n      children: \"+\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        width: 30,\n        height: 30,\n        backgroundColor: \"#9d89da\",\n        borderRadius: 15,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        color: \"#ccc  \",\n        top: -10,\n        right: -10,\n        cursor: \"pointer\"\n      },\n      onClick: () => removeCard(indexSelect),\n      children: \"x\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: modalIsOpen,\n      onRequestClose: closeModal,\n      style: customStyles,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 20\n        },\n        children: \"Nh\\u1EADp url \\u1EA3nh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: valueUrl,\n        onChange: event => [setValueUrl(event.target.value), setValiDateUrlInput(false)],\n        style: {\n          width: 300,\n          fontSize: 16\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), valiDateUrlInput && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 10,\n          color: \"#e26060\"\n        },\n        children: \"Vui l\\xF2ng nh\\u1EADp url\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 32\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"space-around\",\n          marginTop: 20\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => closeModal(),\n          style: {\n            backgroundColor: \"#ccc\",\n            color: \"#e26060\",\n            fontWeight: \"700\"\n          },\n          className: \"btnToggleUtter\",\n          children: \"Tho\\xE1t\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onChangeUrlImg(valueUrl),\n          style: {\n            fontWeight: \"700\"\n          },\n          className: \"btnToggleUtter\",\n          children: \"Ch\\u1ECDn\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: modalIsOpen2,\n      onRequestClose: closeModal2,\n      style: customStyles,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 20\n        },\n        children: \"Nh\\u1EADp t\\xEAn n\\xFAt\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: valueNameKnot,\n        onChange: event => [setNameKnot(event.target.value), setValidateTextKnot(false)],\n        style: {\n          width: 300,\n          fontSize: 16\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), valiadateTextKnot && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 10,\n          color: \"#e26060\"\n        },\n        children: \"Vui l\\xF2ng nh\\u1EADp t\\xEAn n\\xFAt\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 33\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"space-around\",\n          marginTop: 20\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => closeModal2(),\n          style: {\n            backgroundColor: \"#ccc\",\n            color: \"#e26060\",\n            fontWeight: \"700\"\n          },\n          className: \"btnToggleUtter\",\n          children: \"Tho\\xE1t\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onchangeText(valueNameKnot),\n          style: {\n            fontWeight: \"700\"\n          },\n          className: \"btnToggleUtter\",\n          children: \"Ch\\u1ECDn\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Card, \"FVwcIxxVSqaANvPJhJiCCeXYEgg=\");\n\n_c = Card;\n\nfunction Home() {\n  _s2();\n\n  const [showPopup, setShowpopup] = useState(false);\n  const [popupIntent, setPopupIntent] = useState(false);\n  const [checkSame, setCheckSame] = useState(false);\n  const [textInput, setTextInput] = useState(\"\");\n  const [utter, setUtter] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [entitySelect, setEntitySelect] = useState(\"\");\n  const [editing, setEditing] = useState(false);\n  const [listDataEntity, setListDataEntity] = useState([]);\n  const [textInputEnity, setTextInputEnity] = useState(\"\");\n  const [example, setExample] = useState(\"\");\n  const [training, setTraining] = useState(false);\n  const [utterMode, setUtterMode] = useState('basic'); // basic, advanced\n\n  const [additionalCards, setAdditionalCards] = useState([]);\n\n  const train = async () => {\n    try {\n      setTraining(true);\n      await axios.get(window.location.hostname + ':5000' + '/train');\n      setTraining(false);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const [selectedIntent, setSelectedIntent] = useState('');\n\n  const onSelectEntity = entity => {\n    setExample(prev => {\n      if (prev) return prev.replace(entitySelect, `[${entitySelect}]{\"entity\": \"${entity}\"}`);else return textInput.replace(entitySelect, `[${entitySelect}]{\"entity\": \"${entity}\"}`);\n    });\n    setListDataEntity(prev => [...prev, {\n      name: entitySelect,\n      entity: entity\n    }]);\n  };\n\n  const onRemoveEntity = idx => {\n    console.log(idx);\n    const {\n      name,\n      entity\n    } = listDataEntity[idx];\n    setExample(prev => {\n      return prev.replace(`[${name}]{\"entity\": \"${entity}\"}`, name);\n    });\n    setListDataEntity(prev => {\n      return prev.filter((it, currIdx) => currIdx !== idx);\n    });\n  };\n\n  const handleMouseUp = () => {\n    var res = window.getSelection().toString();\n\n    if (res) {\n      setShowpopup(true);\n    } else {\n      setShowpopup(false);\n    }\n\n    setEntitySelect(res);\n  };\n\n  const onClickPopUpCreate = () => {\n    setShowpopup(false);\n  };\n\n  const openPopup = () => {\n    !checkSame && setPopupIntent(true);\n    setCheckSame(false);\n  };\n\n  const onClickOutside = () => {\n    setPopupIntent(false);\n    setCheckSame(true);\n    setTimeout(() => {\n      setCheckSame(false);\n    }, 100);\n  };\n\n  const onClickBtn = () => {\n    setListDataEntity([...listDataEntity, {\n      entity: textInputEnity,\n      valueSelect: entitySelect\n    }]);\n    setShowpopup(false);\n  };\n\n  const handlerEditing = () => {\n    setEditing(!editing);\n  };\n\n  const onChangeText = text => {\n    console.log(text);\n    setTextInputEnity(text);\n  };\n\n  const saveStory = async () => {\n    console.log(example);\n\n    try {\n      await axios.post(window.location.hostname + ':5000' + '/intent', {\n        name: selectedIntent,\n        example: example ? example : textInput\n      });\n      let utterObj;\n\n      if (utterMode === 'advanced') {\n        utterObj = {\n          name: `utter_${new Date().getTime()}`,\n          text: utter\n        };\n        utterObj.elements = additionalCards.map(c => ({\n          title: c.title,\n          subtitle: c.subtitle,\n          image_url: c.image,\n          buttons: c.buttons.map(b => ({\n            title: b.text,\n            payload: b.payload\n          }))\n        }));\n      } else {\n        utterObj = {\n          name: `utter_${new Date().getTime()}`,\n          text: utter\n        };\n      }\n\n      await axios.post(window.location.hostname + ':5000' + '/story', {\n        name: title,\n        intent: selectedIntent,\n        utter: utterObj\n      });\n      setTitle('');\n      setTextInput('');\n      setUtter('');\n      setListDataEntity([]);\n      setSelectedIntent('');\n      setAdditionalCards([]);\n      setUtterMode('basic');\n      notify();\n    } catch (e) {\n      notifyErr();\n    }\n  };\n\n  const notify = () => toast(\"Thành công!\", {\n    position: \"top-center\",\n    autoClose: 2000\n  });\n\n  const notifyErr = () => toast.error(\"Thất bại!\", {\n    position: \"top-center\",\n    autoClose: 1500\n  });\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"table_conten\",\n    children: [training && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        top: 0,\n        bottom: 0,\n        left: 0,\n        right: 0,\n        display: \"flex\",\n        justifyContent: 'center',\n        alignItems: 'center',\n        position: \"absolute\",\n        backgroundColor: 'rgba(0,0,0, 0.2)',\n        zIndex: 9999\n      },\n      children: /*#__PURE__*/_jsxDEV(Loader, {\n        type: \"ThreeDots\",\n        color: \"#5c3bbf\",\n        height: \"100\",\n        width: \"100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Hu\\u1EA5n luy\\u1EC7n bot\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"textDescribe\",\n        children: \"Nh\\u1EADp m\\u1EABu c\\xE2u \\xFD \\u0111\\u1ECBnh v\\xE0 c\\xE2u tr\\u1EA3 l\\u1EDDi. B\\u1EA1n c\\u0169ng c\\xF3 th\\u1EC3 \\u0111\\xE1nh d\\u1EA5u c\\xE1c th\\u1EF1c th\\u1EC3 trong c\\xE2u.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: train,\n          className: \"btnTrain\",\n          disabled: training,\n          style: {\n            backgroundColor: training ? 'rgba(92, 59, 191, 0.2)' : '#5c3bbf'\n          },\n          children: \"Ti\\u1EBFn h\\xE0nh h\\u1ECDc\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inputBox\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Ti\\xEAu \\u0111\\u1EC1\",\n          className: \"inputTag\",\n          value: title,\n          onChange: e => setTitle(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inputBox\",\n        children: editing ? /*#__PURE__*/_jsxDEV(Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            onMouseUp: handleMouseUp,\n            id: \"editor\",\n            style: {\n              fontSize: 18,\n              marginLeft: 10\n            },\n            className: \"input\",\n            children: !!textInput ? Array.from(textInput).map((char, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n              children: char\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 19\n            }, this)) : \"Ý định\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btnSave\",\n              onClick: handlerEditing,\n              children: [\"S\\u1EEDa\", /*#__PURE__*/_jsxDEV(\"img\", {\n                alt: \"edit\",\n                style: {\n                  width: 15,\n                  height: 15,\n                  marginLeft: 10\n                },\n                src: edit\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 20\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"\\xDD \\u0111\\u1ECBnh\",\n            className: \"inputTag\",\n            value: textInput,\n            onChange: e => setTextInput(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btnSave\",\n            onClick: handlerEditing,\n            children: \"Nh\\u1EADp xong\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inputArea\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          placeholder: \"Ph\\u1EA3n h\\u1ED3i\",\n          className: \"textareaTag\",\n          value: utter,\n          rows: 1,\n          onChange: e => setUtter(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btnToggleUtter\",\n          onClick: () => {\n            if (utterMode === 'advanced') {\n              setAdditionalCards([]);\n            }\n\n            setUtterMode(prev => prev === 'basic' ? 'advanced' : 'basic');\n          },\n          children: utterMode === 'basic' ? \"Cơ bản\" : \"Nâng cao\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this), utterMode === 'advanced' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"advanced-utter\",\n        children: [additionalCards.map((c, idx) => {\n          return /*#__PURE__*/_jsxDEV(Card, {\n            indexSelect: idx,\n            card: c,\n            onChangeCard: card => {\n              setAdditionalCards(prev => {\n                const next = Array.from(prev);\n                next[idx] = card;\n                return next;\n              });\n            },\n            onDeleteCard: index => {\n              var arryCard = [...additionalCards];\n              arryCard.splice(index, 1);\n              setAdditionalCards(arryCard);\n            }\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 20\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setAdditionalCards(prev => [...prev, {\n                title: '',\n                subtitle: '',\n                image: '',\n                buttons: []\n              }]);\n            },\n            style: additionalCards.length >= 5 ? {\n              display: \"none\"\n            } : {\n              width: '64px',\n              height: '64px',\n              borderRadius: '32px',\n              backgroundColor: '#2196f3',\n              fontSize: '24pt',\n              color: 'white',\n              border: '1px solid #2196f3'\n            },\n            children: \"+\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 38\n      }, this), showPopup && /*#__PURE__*/_jsxDEV(PopUpCreateEntity, {\n        width: \"60%\",\n        show: showPopup,\n        placeholderInput: textInputEnity,\n        btnText: \"Tạo thực thể\",\n        onClickOutside: onClickPopUpCreate,\n        onChangeText: onChangeText,\n        onSelect: onSelectEntity\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"choose_intent\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"conten_1\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"\\xDD \\u0111\\u1ECBnh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: openPopup,\n            className: \"conten_2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 14,\n                marginLeft: 10\n              },\n              children: selectedIntent ? selectedIntent : 'Chọn hoặc thêm ý định'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              alt: \"dropdown\",\n              style: {\n                width: 10,\n                height: 10,\n                marginRight: 15\n              },\n              src: dropdown\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 13\n          }, this), popupIntent && /*#__PURE__*/_jsxDEV(PopUpCreateIntent, {\n            width: \"60%\",\n            top: \"42px\",\n            left: \"53px\",\n            btnText: \"Tạo ý định\",\n            show: popupIntent,\n            onClickOutside: onClickOutside,\n            onSelect: setSelectedIntent // placeholderInput={entitySelect}\n            ,\n            onClickBtn: onClickBtn // onChangeText={onChangeText}\n\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ListEntity, {\n        data: listDataEntity,\n        setData: onRemoveEntity\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: saveStory,\n        className: \"noti\",\n        style: {\n          marginTop: '36px',\n          marginBottom: '36px',\n          fontSize: '18px',\n          width: '200px',\n          height: 40\n        },\n        children: \"Th\\xEAm k\\u1ECBch b\\u1EA3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(ToastContainer, {\n        position: \"top-center\",\n        autoClose: 2000\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 304,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(Home, \"YSd2oANg7dxTlAhxT8sWS5iviaE=\");\n\n_c2 = Home;\nexport default Home;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Card\");\n$RefreshReg$(_c2, \"Home\");","map":{"version":3,"sources":["/Users/nhatngo/Downloads/demo-chatbot-master/frontend/src/container/Home.jsx"],"names":["React","useState","Fragment","ListEntity","PopUpCreateEntity","axios","PopUpCreateIntent","dropdown","Loader","robot","edit","ToastContainer","toast","ReactDOM","Modal","Card","card","onChangeCard","indexSelect","onDeleteCard","modalIsOpen","setIsOpen","modalIsOpen2","setIsOpen2","valueUrl","setValueUrl","valueNameKnot","setNameKnot","valiDateUrlInput","setValiDateUrlInput","valiadateTextKnot","setValidateTextKnot","title","subtitle","image","buttons","text","setText","idx","setIdx","openModal","closeModal","openModal2","closeModal2","customStyles","content","top","left","right","bottom","marginRight","transform","borderRadius","removeCard","key","onChangeUrlImg","url","onchangeText","btns","Array","from","backgroundColor","padding","border","display","flexDirection","position","marginBottom","e","target","value","justifyContent","alignItems","width","height","objectFit","map","b","payload","color","cursor","event","fontSize","marginTop","fontWeight","Home","showPopup","setShowpopup","popupIntent","setPopupIntent","checkSame","setCheckSame","textInput","setTextInput","utter","setUtter","setTitle","entitySelect","setEntitySelect","editing","setEditing","listDataEntity","setListDataEntity","textInputEnity","setTextInputEnity","example","setExample","training","setTraining","utterMode","setUtterMode","additionalCards","setAdditionalCards","train","get","window","location","hostname","console","log","selectedIntent","setSelectedIntent","onSelectEntity","entity","prev","replace","name","onRemoveEntity","filter","it","currIdx","handleMouseUp","res","getSelection","toString","onClickPopUpCreate","openPopup","onClickOutside","setTimeout","onClickBtn","valueSelect","handlerEditing","onChangeText","saveStory","post","utterObj","Date","getTime","elements","c","image_url","intent","notify","notifyErr","autoClose","error","zIndex","flex","marginLeft","char","index","next","arryCard","splice","length"],"mappings":"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","sourcesContent":["import React, {useState, Fragment} from \"react\";\nimport \"../App.css\";\nimport ListEntity from \"../component/ListEntity\";\nimport PopUpCreateEntity from \"../base/PopUpCreateEntity\";\nimport axios from \"axios\";\nimport PopUpCreateIntent from \"../base/PopUpCreateIntent\";\nimport dropdown from '../access/img/icon_down.png';\nimport Loader from 'react-loader-spinner';\nimport robot from \"../access/img/icon_robot.png\";\nimport edit from '../access/img/icon_edit_text.png'\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport ReactDOM from 'react-dom';\nimport Modal from 'react-modal';\n\nfunction Card({ card, onChangeCard, indexSelect, onDeleteCard }) {\n  const [modalIsOpen, setIsOpen] = React.useState(false);\n  const [modalIsOpen2, setIsOpen2] = React.useState(false)\n  const [valueUrl, setValueUrl] = React.useState(\"\")\n  const [valueNameKnot, setNameKnot] = React.useState(\"\")\n  const [valiDateUrlInput, setValiDateUrlInput] = React.useState(false)\n  const [valiadateTextKnot, setValidateTextKnot] = React.useState(false)\n  const { title, subtitle, image, buttons } = card\n  const [text, setText] = React.useState(null)\n  const [idx, setIdx] = React.useState(null)\n   // model\n  const openModal = () => {\n    setIsOpen(true)\n  }\n\n  const closeModal = () => {\n    setIsOpen(false)\n  }\n\n  const openModal2 = () => {\n    setIsOpen2(true)\n  }\n\n  const closeModal2 = () => {\n    setIsOpen2(false)\n  }\n\n  const customStyles = {\n    content : {\n      top         : '50%',\n      left        : '50%',\n      right       : 'auto',\n      bottom      : 'auto',\n      marginRight : '-50%',\n      transform: 'translate(-50%, -50%)',\n      borderRadius:20\n    }\n  };\n  const removeCard = (key) => {\n    onDeleteCard(key)\n  }\n  const onChangeUrlImg = (url) => {\n    if (!url) {\n      setValiDateUrlInput(true)\n      return\n    }\n    onChangeCard({ ...card, image: url })\n    closeModal()\n    setValiDateUrlInput(false)\n    setValueUrl(\"\")\n  }\n\n  const onchangeText = (text) => {\n    if (!text) {\n      setValidateTextKnot(true)\n      return\n    }\n    if (text) {\n      const btns = Array.from(card.buttons)\n      btns[idx] = {text}\n      onChangeCard({\n        ...card,\n        buttons: btns\n      })\n      closeModal2()\n      setIdx(null)\n      setNameKnot(\"\")\n    }\n  }\n  return (\n    <div style={{\n      borderRadius: '8px',\n      backgroundColor: '#ccc',\n      padding: '16px',\n      border: '1px solid #ccc',\n      display: 'flex',\n      flexDirection: 'column',\n      marginRight: '24px',\n      position:\"relative\"\n    }}>\n      <input value={title} placeholder='Nhập tiêu đề' style={{marginBottom: '8px'}} onChange={e => onChangeCard({...card, title: e.target.value})} />\n      <input value={subtitle} placeholder='Nhập mô tả' style={{marginBottom: '8px'}} onChange={e => onChangeCard({...card, subtitle: e.target.value})} />\n      <div style={{display: 'flex', justifyContent: 'center', alignItems: 'center', marginBottom: '8px'}}>\n        <img src={image || 'https://via.placeholder.com/200/200'} alt={'ảnh thẻ'}\n        onClick={() => {\n          // const url = prompt(\"Nhập url ảnh\", image)\n          openModal()\n          // if (url) {\n          //   onChangeCard({...card, image: url})\n          // }\n        }}\n        style={{\n          width: '150px', height: '150px',\n          objectFit: 'cover'\n        }} />\n      </div>\n      {buttons && buttons.map((b, idx) => (\n        <button key={idx} onClick={() => {\n          openModal2()\n          setIdx(idx)\n          // const text = prompt(\"Nhập tên nút\", b.text) \n          // const payload = prompt(\"Nhập payload\", b.payload) \n          // if (text) {\n          //   const btns = Array.from(card.buttons)\n          //   btns[idx] = {text}\n          //   onChangeCard({\n          //     ...card,\n          //     buttons: btns\n          //   })\n          // }\n        }}>{b.text}</button>\n      ))}\n      <button onClick={() => onChangeCard({ ...card, buttons: [...card.buttons, { text: '<rỗng>', payload: '' }] })}>+</button>\n      <div style={{\n        position: \"absolute\",\n        width: 30,\n        height: 30,\n        backgroundColor: \"#9d89da\",\n        borderRadius: 15,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        color: \"#ccc  \",\n        top: -10,\n        right: -10,\n        cursor: \"pointer\",\n      }}\n      onClick={() => removeCard(indexSelect)}\n      >\n        x\n      </div>\n        <Modal\n          isOpen={modalIsOpen}\n          onRequestClose={closeModal}\n          style={customStyles}\n        >\n        <div style={{marginBottom:20}}>Nhập url ảnh</div>\n        <input value={valueUrl} onChange={(event) => [setValueUrl(event.target.value), setValiDateUrlInput(false)]} style={{ width: 300, fontSize: 16 }} />\n          {valiDateUrlInput && <div style={{fontSize: 10, color:\"#e26060\"}}>Vui lòng nhập url</div>}\n            <div style={{ display: \"flex\", justifyContent: \"space-around\", marginTop:20}}>\n              <button onClick={() => closeModal()} style={{backgroundColor:\"#ccc\", color:\"#e26060\", fontWeight:\"700\"}} className={\"btnToggleUtter\"}>Thoát</button>\n              <button onClick={() => onChangeUrlImg(valueUrl)} style={{fontWeight:\"700\"}} className={\"btnToggleUtter\"}>Chọn</button>\n              </div>\n      </Modal>\n      <Modal\n          isOpen={modalIsOpen2}\n          onRequestClose={closeModal2}\n          style={customStyles}\n        >\n        <div style={{marginBottom:20}}>Nhập tên nút</div>\n        <input value={valueNameKnot} onChange={(event) => [setNameKnot(event.target.value), setValidateTextKnot(false)]} style={{ width: 300, fontSize: 16 }} />\n          {valiadateTextKnot && <div style={{fontSize: 10, color:\"#e26060\"}}>Vui lòng nhập tên nút</div>}\n            <div style={{ display: \"flex\", justifyContent: \"space-around\", marginTop:20}}>\n              <button onClick={() => closeModal2()} style={{backgroundColor:\"#ccc\", color:\"#e26060\", fontWeight:\"700\"}} className={\"btnToggleUtter\"}>Thoát</button>\n              <button onClick={() => onchangeText(valueNameKnot)} style={{fontWeight:\"700\"}} className={\"btnToggleUtter\"}>Chọn</button>\n              </div>\n        </Modal>\n    </div>\n  );\n}\n\nfunction Home() {\n  const [showPopup, setShowpopup] = useState(false);\n  const [popupIntent, setPopupIntent] = useState(false);\n  const [checkSame, setCheckSame] = useState(false);\n  const [textInput, setTextInput] = useState(\"\");\n  const [utter, setUtter] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [entitySelect, setEntitySelect] = useState(\"\");\n  const [editing, setEditing] = useState(false);\n  const [listDataEntity, setListDataEntity] = useState([]);\n  const [textInputEnity, setTextInputEnity] = useState(\"\");\n  const [example, setExample] = useState(\"\");\n  const [training, setTraining] = useState(false);\n  const [utterMode, setUtterMode] = useState('basic'); // basic, advanced\n  const [additionalCards, setAdditionalCards] = useState([]);\n  const train = async () => {\n    try {\n      setTraining(true)\n      await axios.get(window.location.hostname + ':5000' + '/train')\n      setTraining(false)\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  const [selectedIntent, setSelectedIntent] = useState('');\n  const onSelectEntity = entity => {\n    setExample(prev => {\n      if (prev) return prev.replace(entitySelect, `[${entitySelect}]{\"entity\": \"${entity}\"}`)\n      else return textInput.replace(entitySelect, `[${entitySelect}]{\"entity\": \"${entity}\"}`)\n    })\n    setListDataEntity(prev => ([\n      ...prev,\n      { name: entitySelect, entity: entity},\n    ]));\n  }\n  const onRemoveEntity = idx => {\n    console.log(idx)\n    const { name, entity }= listDataEntity[idx]\n    setExample(prev => {\n      return prev.replace(`[${name}]{\"entity\": \"${entity}\"}`, name)\n    })\n    setListDataEntity(prev => {\n      return prev.filter((it, currIdx) => currIdx !== idx)\n    })\n  }\n\n  const handleMouseUp = () => {\n    var res = window.getSelection().toString();\n    if (res) {\n      setShowpopup(true)\n    } else {\n      setShowpopup(false)\n    }\n    setEntitySelect(res)\n  };\n\n  const onClickPopUpCreate = () => {\n    setShowpopup(false);\n  };\n  const openPopup = () => {\n    !checkSame && setPopupIntent(true);\n    setCheckSame(false);\n  };\n\n  const onClickOutside = () => {\n    setPopupIntent(false);\n    setCheckSame(true);\n    setTimeout(() => {\n      setCheckSame(false);\n    }, 100);\n  };\n\n  const onClickBtn = () => {\n    setListDataEntity([\n      ...listDataEntity,\n      { entity: textInputEnity, valueSelect: entitySelect },\n    ]);\n    setShowpopup(false);\n  };\n  const handlerEditing = () => {\n    setEditing(!editing);\n  };\n  const onChangeText = (text) => {\n    console.log(text);\n    setTextInputEnity(text);\n  };\n\n  const saveStory = async () => {\n    console.log(example);\n    try {\n      await axios.post(window.location.hostname + ':5000' + '/intent', {\n        name: selectedIntent, example: example ? example : textInput\n      })\n      let utterObj;\n      if (utterMode === 'advanced') {\n        utterObj = {name: `utter_${new Date().getTime()}`, text: utter}\n        utterObj.elements = additionalCards.map(c => ({\n          title: c.title,\n          subtitle: c.subtitle,\n          image_url: c.image,\n          buttons: c.buttons.map(b => ({\n            title: b.text,\n            payload: b.payload\n          }))\n        }))\n      } else {\n        utterObj = {name: `utter_${new Date().getTime()}`, text: utter}\n      }\n      await axios.post(window.location.hostname + ':5000' + '/story', {name: title, intent: selectedIntent, utter: utterObj})\n      setTitle('')\n      setTextInput('')\n      setUtter('')\n      setListDataEntity([])\n      setSelectedIntent('')\n      setAdditionalCards([])\n      setUtterMode('basic')\n      notify()\n    } catch (e) {\n      notifyErr()\n    }\n  }\n\n  const notify = () => toast(\"Thành công!\", { position: \"top-center\", autoClose: 2000, })\n  const notifyErr = () => toast.error(\"Thất bại!\",{position:\"top-center\", autoClose: 1500,})\n\n  return (\n    <div className=\"table_conten\">\n      {training && <div\n        style={{\n          top: 0,\n          bottom: 0,\n          left: 0,\n          right: 0,\n          display: \"flex\",\n          justifyContent: 'center',\n          alignItems: 'center',\n          position: \"absolute\",\n          backgroundColor: 'rgba(0,0,0, 0.2)',\n          zIndex: 9999\n        }}\n      >\n          <Loader type=\"ThreeDots\" color=\"#5c3bbf\" height=\"100\" width=\"100\" />\n      </div>}\n      <div>\n        <h2>Huấn luyện bot</h2>\n        <div className=\"textDescribe\">\n          Nhập mẫu câu ý định và câu trả lời. Bạn cũng có thể đánh dấu các thực thể trong câu.\n        </div>\n        <div style={{display: 'flex'}}>\n          <div style={{flex: 1}} />\n          <button onClick={train} className=\"btnTrain\" disabled={training} style={{backgroundColor: training ? 'rgba(92, 59, 191, 0.2)' : '#5c3bbf'}}>\n              Tiến hành học\n          </button>\n        </div>\n        {/* input */}\n        <div className=\"inputBox\">\n          <input\n            placeholder=\"Tiêu đề\"\n            className=\"inputTag\"\n            value={title}\n            onChange={(e) => setTitle(e.target.value)}\n          />\n        </div>\n        <div className=\"inputBox\">\n          {editing ? (\n            <Fragment>\n              <div\n                onMouseUp={handleMouseUp}\n                id=\"editor\"\n                style={{ fontSize: 18, marginLeft: 10 }}\n                className=\"input\"\n              >\n                {!!textInput ? Array.from(textInput).map((char, index) => (\n                  <span key={index}>{char}</span>\n                )) : \"Ý định\"}\n              </div>\n              <div style={{display:\"flex\"}}>\n                <button className=\"btnSave\" onClick={handlerEditing}>\n                  Sửa\n                   <img\n                    alt={\"edit\"}\n                    style={{ width: 15, height: 15, marginLeft: 10 }}\n                    src={edit}\n                  />\n                </button>\n                \n              </div>\n            </Fragment>\n          ) : (\n            <Fragment>\n              <input\n                placeholder=\"Ý định\"\n                className=\"inputTag\"\n                value={textInput}\n                onChange={(e) => setTextInput(e.target.value)}\n              />\n              <button className=\"btnSave\" onClick={handlerEditing}>\n                Nhập xong\n              </button>\n            </Fragment>\n          )}\n        </div>\n        <div className=\"inputArea\">\n          <textarea\n            placeholder=\"Phản hồi\"\n            className=\"textareaTag\"\n            value={utter}\n            rows={1}\n            onChange={(e) => setUtter(e.target.value)}\n          />\n          <button className=\"btnToggleUtter\" onClick={() => {\n            if (utterMode === 'advanced') {\n              setAdditionalCards([])\n            }\n            setUtterMode(prev => prev === 'basic' ? 'advanced' : 'basic')\n          }}>\n            {utterMode === 'basic' ? \"Cơ bản\" : \"Nâng cao\"}  \n          </button>\n        </div>\n        {utterMode === 'advanced' && <div className=\"advanced-utter\">\n          {additionalCards.map((c, idx) => {\n            return <Card indexSelect={idx} key={idx} card={c} onChangeCard={(card) => {\n              setAdditionalCards(prev => {\n                const next = Array.from(prev)\n                next[idx] = card\n                return next\n              })\n            }}\n              onDeleteCard={(index) => {\n                var arryCard = [...additionalCards]\n                arryCard.splice(index, 1)\n                setAdditionalCards(arryCard)\n            }}\n            />\n          })}\n          <div>\n            <button\n            onClick={() => {\n              setAdditionalCards(prev => [...prev, {\n                title: '', subtitle: '', image: '', buttons: []\n              }])\n              }}\n            \n              style={additionalCards.length >=5 ? {display:\"none\"} : {\n                width: '64px',\n                height: '64px',\n                borderRadius: '32px',\n                backgroundColor: '#2196f3',\n                fontSize: '24pt',\n                color: 'white',\n                border: '1px solid #2196f3'\n              }}>\n            +\n          </button>\n          </div>\n        </div>}\n        {showPopup && (\n          <PopUpCreateEntity\n            width={\"60%\"}\n            show={showPopup}\n            placeholderInput={textInputEnity}\n            btnText={\"Tạo thực thể\"}\n            onClickOutside={onClickPopUpCreate}\n            onChangeText={onChangeText}\n            onSelect={onSelectEntity}\n          />\n        )}\n        <div className=\"choose_intent\">\n          <div className=\"conten_1\">\n            <div>Ý định</div>\n            <div onClick={openPopup} className=\"conten_2\">\n              <div style={{ fontSize: 14, marginLeft: 10 }}>\n                {selectedIntent ? selectedIntent : 'Chọn hoặc thêm ý định'}\n              </div>\n              <img\n                alt={\"dropdown\"}\n                style={{ width: 10, height: 10, marginRight: 15 }}\n                src={dropdown}\n              />\n            </div>\n            {popupIntent && (\n              <PopUpCreateIntent\n                width={\"60%\"}\n                top={\"42px\"}\n                left={\"53px\"}\n                btnText={\"Tạo ý định\"}\n                show={popupIntent}\n                onClickOutside={onClickOutside}\n                onSelect={setSelectedIntent}\n                // placeholderInput={entitySelect}\n                onClickBtn={onClickBtn}\n                // onChangeText={onChangeText}\n              />\n            )}\n          </div>\n        </div>\n        <ListEntity data={listDataEntity} setData={onRemoveEntity} />\n        <button onClick={saveStory} className=\"noti\" style={{marginTop: '36px', marginBottom: '36px', fontSize: '18px', width: '200px', height: 40}}>\n          Thêm kịch bản\n        </button>\n      </div>\n      <div>\n        <ToastContainer position=\"top-center\" autoClose={2000}/>\n      </div>\n\n    </div>\n  )\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}